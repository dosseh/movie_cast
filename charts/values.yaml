
imagePullSecrets:
  - name: registry-secret

# Configuration Nginx (reverse proxy)
nginx:
  name: nginx
  port: 8080
  replicas: 1
  image: "" # Sera surchargé par le pipeline
  tag: ""   # Sera surchargé par le pipeline
  storage: 2Gi

# Configuration du service Movie
movieService:
  name: movie-service
  replicas: 1
  port: 8000
  servicePort: 8001
  image: "" # Sera surchargé par le pipeline
  tag: ""   # Sera surchargé par le pipeline
  storage:
    size: 2Gi
    configMountPath: "app/data" # Ne pas stocker en PVC dans app directement
  
  # Base de données Movie
  db:
    name: movie-db
    replicas: 1
    user: movie_db_username
    password: movie_db_password
    dbName: movie_db_dev
    port: 5432
    image: "" # Sera surchargé par le pipeline (postgres)
    tag: ""   # Sera surchargé par le pipeline
    storage: 2Gi

# Configuration du service Cast
castService:
  name: cast-service
  replicas: 1
  port: 8000
  servicePort: 8002
  image: "" # Sera surchargé par le pipeline
  tag: ""   # Sera surchargé par le pipeline
  storage:
    size: 2Gi
    configMountPath: "app/data" # Ne pas stocker en PVC dans app directement
  
  # Base de données Cast
  db:
    name: cast-db
    replicas: 1
    user: cast_db_username
    password: cast_db_password
    dbName: cast_db_dev
    port: 5432
    image: "" # Sera surchargé par le pipeline (postgres)
    tag: ""   # Sera surchargé par le pipeline
    storage: 2Gi

# Environnement de déploiement
environment: dev

# Configuration Ingress
ingress:
  hosts:
    - host: movie-cast.ip-ddns.com
      paths:
        - path: /api/v1/movies
          pathType: Prefix
        - path: /api/v1/casts
          pathType: Prefix
        - path: /health
          pathType: Prefix

